import{_ as S,m as C,z as x,u as A,A as D,B as v,k as s,o as i,c as l,l as m,a as t,t as a,q as I,w as b,i as f,F as w,e as T,p as F,h as V,x as M,d as r}from"./index-099da154.js";import{S as k,a as y}from"./StatusUpdates-950ae6f2.js";import{P as L}from"./PageTitleWithButton-63be4549.js";import{U as P}from"./User_Footer_Menu-f76b70d3.js";const R={name:"IncidentCard",components:{StatusNewUpdate:k,StatusUpdates:y},setup(){const n=C({}),d=x(),e=A().token;D(()=>d.params.id,async c=>{if(c){const _={headers:{Authorization:`Bearer ${e}`}};try{const o=await T.get(`/api/incident/${c}`,_);n.value=o.data,console.log(o.data)}catch(o){console.error("There was an error fetching the data:",o)}}},{immediate:!0});const h=v(()=>localStorage.getItem("isAdmin")==="true"),g=v(()=>Object.keys(n.value).length===0);return{incident:n,isLoading:g,isAdmin:h}}},u=n=>(F("data-v-81264d7e"),n=n(),V(),n),W={key:0},z={class:"container-sm mt-3 border border-light-subtle rounded shadow p-4"},E={class:"row"},j={class:"col"},q={class:"badge bg-info-subtle text-dark"},O={class:"col text-end"},G={key:0,class:"btn-group float-end",role:"group"},H=u(()=>t("button",{type:"button",class:"btn btn-outline-dark dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),J={class:"dropdown-menu"},K=u(()=>t("button",{class:"btn btn-success me-2"},"Solved",-1)),Q={class:"row g-2"},X={class:"col"},Y={key:0},Z=u(()=>t("b",null,"solved",-1)),$={key:1},tt=u(()=>t("b",null,"open",-1)),et=u(()=>t("div",{class:"col"},null,-1));function nt(n,d,p,e,h,g){const c=s("StatusNewUpdate"),_=s("StatusUpdates");return i(),l(w,null,[e.isLoading?(i(),l("div",W,"Loading...")):m("",!0),t("div",z,[t("div",E,[t("h3",j,[t("span",q,a(e.incident.id),1),I(" "+a(e.incident.titel),1)]),t("div",O,[e.isAdmin?(i(),l("div",G,[H,t("ul",J,[t("a",{class:"dropdown-item",href:"#",id:"edit",onClick:d[0]||(d[0]=b((...o)=>n.editIncident&&n.editIncident(...o),["stop"]))},"Edit"),t("a",{class:"dropdown-item",href:"#",id:"delete",onClick:d[1]||(d[1]=b((...o)=>n.deleteIncident&&n.deleteIncident(...o),["stop"]))},"Delete")])])):m("",!0),K])]),t("div",Q,[t("div",X,[t("p",null,"Description: "+a(e.incident.description),1),t("p",null,"Reportdate: "+a(e.incident.reportdate),1),t("p",null,"Reporter: "+a(e.incident.username),1),e.incident.isSolved?(i(),l("p",Y,[I(" Status: "),Z])):(i(),l("p",$,[I(" Status: "),tt])),t("p",null,"Category: "+a(e.incident.categoryId),1),t("p",null,"Severity: "+a(e.incident.severityName),1)]),et])]),e.incident&&e.incident.id?(i(),f(c,{key:1,incidentId:Number(e.incident.id)},null,8,["incidentId"])):m("",!0),e.incident&&e.incident.id?(i(),f(_,{key:2,incidentId:Number(e.incident.id)},null,8,["incidentId"])):m("",!0)],64)}const ot=S(R,[["render",nt],["__scopeId","data-v-81264d7e"]]),it={props:{id:[Number,String]},components:{NavigationBar:M,PageTitleWithButton:L,IncidentCard:ot,StatusNewUpdate:k,StatusUpdates:y,User_Footer_Menu:P}};function st(n,d,p,e,h,g){const c=s("NavigationBar"),_=s("PageTitleWithButton"),o=s("IncidentCard"),N=s("StatusNewUpdate"),U=s("StatusUpdates"),B=s("User_Footer_Menu");return i(),l(w,null,[r(c),r(_,{msg:"Incident Details",destination:"/incidents",buttonText:"Back to Incidents"}),r(o),r(N,{incidentId:p.id},null,8,["incidentId"]),r(U,{incidentId:p.id},null,8,["incidentId"]),r(B)],64)}const lt=S(it,[["render",st]]);export{lt as default};
